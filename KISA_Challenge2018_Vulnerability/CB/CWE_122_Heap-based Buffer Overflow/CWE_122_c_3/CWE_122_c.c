//gcc -o CB CWE_122_c.c -fno-stack-protector -mpreferred-stack-boundary=2 -m32
#include <stdio.h>

struct func{
	char fname[32];
	void (*print)(char *);
};

void print(char *p){
	puts(p);
}

int func(){
	struct func *tmp = malloc(sizeof(struct func));
	setbuf(stdout,NULL);
	system("clear");
	int size;
	scanf("%d", &size);
	if(size != 1021){
		return 0;
	}
	read(0,tmp->fname,size);
	tmp->print(tmp->fname);
}
int main(){
	func();
	puts("attack fail");
}