//gcc -o CB CWE_562_d.c -fno-stack-protector -mpreferred-stack-boundary=2 -m32
#include <stdio.h>

#define name_size 256

void solve(){
	system("/bin/sh");
}

void menu(){
	puts("8430. get name(name size : 256)");
	puts("2012. edit name");
	puts("3843. print name");
}

void editname(char *name){
	read(0, name, name_size);
}
char *getname(){
	char name[name_size];
	char *p = &name;
	read(0, name, name_size);
	return p;
}
int main(){
	int select;
	char *name = malloc(name_size);
	setbuf(stdout,NULL);
	while(1){
		menu();
		scanf("%d", &select);
		switch(select){
			case 8430:
				puts("check two!!!");
				scanf("%d", &select);
				if(select != 8203) break;
				name = getname();
				break;
			case 2012:
				editname(name);
				break;
			case 3843:
				puts(name);
				break;
			default:
				puts("attack fail");
				exit(0);
		}
	}
}


/*int main(){
        func();
        puts("attack fail");
}*/
