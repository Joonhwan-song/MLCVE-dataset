//gcc -o CB CWE_562_c.c -fno-stack-protector -mpreferred-stack-boundary=2 -m32
#include <stdio.h>

#define name_size 256

char sh[]="/bin/sh";

void editname(char *name){
	int input_size;
	puts("[edit name]");
	puts("input size?");
	read(0, &input_size, 4);
	if(input_size < name_size)
		read(0, name, name_size);
	else
		puts("bye");
}
char *getname(){
	char name[name_size];
	char *p = &name;
	puts("input name");
	read(0, name, name_size);
	return p;
}
int func(){
	char *name;
	system("clear");
	name = getname();
	editname(name);
}
int main(){
	puts("What is your name?");
    func();
    puts("attack fail");
}
